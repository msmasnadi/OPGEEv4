<?xml version="1.0" encoding="UTF-8"?>
<!-- Working draft of Geologic Hydrogen production pathway XML file format -->
<!-- This file contains the standard OPGEEv4 LCA model. The metadata describing fields, options,
     and default values is found in attributes.xml. When creating a new model, the user can start
     with the standard model and add/delete/alter elements in a separate file, or simply save copy
     and modify this file. We also (will) support site- and user-specific XML template files that
     define custom starting points.
     -->
<Model schema_version="4.0.0.a" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="opgee.xsd">

	<Analysis name="template-h2">
		<FieldRef name="template-h2" />
	</Analysis>

	<Field name="template-h2">
		<Process class="Boundary" boundary="Production" />
		<Process class="Boundary" boundary="Transportation" />
		<Process class="Boundary" boundary="Distribution" />

		<ProcessChoice name="downhole_pump_option">
             <ProcessGroup name="downhole_pump_on">
				<ProcessRef name="DownholePump" />

				<StreamRef name="ReservoirWellInterface => DownholePump" />
				<StreamRef name="DownholePump => Separation" />
			</ProcessGroup>

			<ProcessGroup name="downhole_pump_off">
				<StreamRef name="ReservoirWellInterface => Separation" />
			</ProcessGroup>
		</ProcessChoice>

        <ProcessChoice name="dehydrator_option">
            <ProcessGroup name="dehydrator_on">
                <ProcessRef name="GasDehydration"/>

                <StreamRef name="Separation => GasDehydration"/>
                <StreamRef name="GasDehydration => GasNode"/>
            </ProcessGroup>

            <ProcessGroup name="dehydrator_off">
                <StreamRef name="Separation => GasNode"/>
            </ProcessGroup>
        </ProcessChoice>

        <ProcessChoice name="agr_option">
            <ProcessGroup name="agr_on">
                <ProcessRef name="AcidGasRemoval"/>
                <ProcessRef name="SourGasCompressor" />
                <ProcessRef name="SourGasInjection" />

                <StreamRef name="GasNode => AcidGasRemoval" />
                <StreamRef name="AcidGasRemoval => PsaPreCompressor" />
                <StreamRef name="AcidGasRemoval => SourGasCompressor" />
                <StreamRef name="SourGasCompressor => SourGasInjection" />
            </ProcessGroup>

            <ProcessGroup name="agr_off">
                <StreamRef name="GasNode => PsaPreCompressor" />
            </ProcessGroup>
        </ProcessChoice>

        <ProcessChoice name="waste_gas_treatment">
            <ProcessGroup name="vent">
                <ProcessRef name="Venting"/>

                <StreamRef name="PressureSwingAdsorption => Venting"/>
<!--                #<StreamRef name="Ventin => ProductionBoundary"/>-->
            </ProcessGroup>

            <ProcessGroup name="flare">
                <ProcessRef name="Flaring"/>

                <StreamRef name="PressureSwingAdsorption => Flaring"/>
            </ProcessGroup>

            <ProcessGroup name="onsite_electricity_generation">
                <ProcessRef name="OnsiteElectricityGeneration"/>
                <ProcessRef name="GasReinjectionCompressor" />
			    <ProcessRef name="GasReinjectionWell" />

                <StreamRef name="PressureSwingAdsorption => OnsiteElectricityGeneration"/>
                <StreamRef name="OnsiteElectricityGeneration => GasReinjectionCompressor"/>
                <StreamRef name="GasReinjectionCompressor => OnsiteElectricityGeneration"/>
                <StreamRef name="GasReinjectionCompressor => GasReinjectionWell"/>
            </ProcessGroup>

            <ProcessGroup name="gas_reinjection">
                <ProcessRef name="GasReinjectionCompressor" />
			    <ProcessRef name="GasReinjectionWell" />

                <StreamRef name="PressureSwingAdsorption => GasReinjectionCompressor"/>
                <StreamRef name="GasReinjectionCompressor => GasReinjectionWell"/>
            </ProcessGroup>
        </ProcessChoice>

		<Aggregator name="ExplorationAndDrilling">
			<Process class="Exploration" after="true" />
			<Process class="Drilling" after="true" />
		</Aggregator>

		<Aggregator name="ProductionExtraction">
			<Process class="ReservoirWellInterface"/>
			<Process class="DownholePump" />
			<Process class="Separation" impute-start="true" />
		</Aggregator>

		<Aggregator name="SurfaceProcessing">
			<Process class="WaterTreatment" />
            <Process class="GasDehydration"/>
            <Process class="GasNode"/>
            <Process class="AcidGasRemoval"/>
            <Process class="SourGasCompressor"/>
            <Process class="SourGasInjection"/>
            <Process class="PsaPreCompressor" />
            <Process class="PressureSwingAdsorption" />
            <Process class="OnsiteElectricityGeneration" cycle-start="true" />
            <Process class="GasReinjectionCompressor" />
			<Process class="GasReinjectionWell" />
            <Process class="Venting"/>
            <Process class="Flaring"/>
		</Aggregator>

		<Stream src="Exploration" dst="Drilling">
			<Contains>None</Contains>
		</Stream>

		<Stream src="Reservoir" dst="ReservoirWellInterface">
			<Contains>oil</Contains>
		</Stream>

        <Stream src="ReservoirWellInterface" dst="Separation">
			<Contains>oil</Contains>
		</Stream>

		<Stream src="ReservoirWellInterface" dst="DownholePump">
			<Contains>oil</Contains>
		</Stream>

		<Stream src="DownholePump" dst="Separation">
			<Contains>oil</Contains>
		</Stream>

		<Stream src="Separation" dst="WaterTreatment">
			<Contains>water</Contains>
		</Stream>

        <Stream src="WaterTreatment" dst="ProductionBoundary">
			<Contains>water</Contains>
		</Stream>

<!--		<Stream src="Separation" dst="PsaPreCompressor">-->
<!--			<Contains>gas</Contains>-->
<!--		</Stream>-->

         <Stream src="Separation" dst="GasDehydration">
			<Contains>gas</Contains>
		</Stream>

        <Stream src="Separation" dst="GasNode">
			<Contains>gas</Contains>
		</Stream>

        <Stream src="GasDehydration" dst="GasNode">
			<Contains>gas</Contains>
		</Stream>

        <Stream src="GasNode" dst="AcidGasRemoval">
			<Contains>gas</Contains>
		</Stream>

        <Stream src="AcidGasRemoval" dst="PsaPreCompressor">
			<Contains>gas</Contains>
		</Stream>

        <Stream src="AcidGasRemoval" dst="SourGasCompressor">
			<Contains>gas for sour gas compressor</Contains>
		</Stream>

        <Stream src="SourGasCompressor" dst="SourGasInjection">
			<Contains>gas</Contains>
		</Stream>

        <Stream src="GasNode" dst="PsaPreCompressor">
			<Contains>gas</Contains>
		</Stream>

        <Stream src="PsaPreCompressor" dst="PressureSwingAdsorption">
			<Contains>gas</Contains>
		</Stream>

        <Stream src="PressureSwingAdsorption" dst="OnsiteElectricityGeneration">
			<Contains>gas</Contains>
		</Stream>

        <Stream src="PressureSwingAdsorption" dst="Venting">
			<Contains>gas</Contains>
		</Stream>

<!--        <Stream src="Venting" dst="ProductionBoundary">-->
<!--			<Contains>gas</Contains>-->
<!--		</Stream>-->

        <Stream src="PressureSwingAdsorption" dst="Flaring">
			<Contains>gas</Contains>
		</Stream>

        <Stream src="PressureSwingAdsorption" dst="GasReinjectionCompressor">
			<Contains>gas</Contains>
		</Stream>

        <Stream src="OnsiteElectricityGeneration" dst="ProductionBoundary">
			<Contains>H2</Contains>
		</Stream>

        <Stream src="OnsiteElectricityGeneration" dst="GasReinjectionCompressor">
			<Contains>gas</Contains>
		</Stream>

        <Stream src="GasReinjectionCompressor" dst="OnsiteElectricityGeneration">
			<Contains>iteration gas</Contains>
		</Stream>

		<Stream src="GasReinjectionCompressor" dst="GasReinjectionWell">
			<Contains>gas</Contains>
		</Stream>

	</Field>


</Model>